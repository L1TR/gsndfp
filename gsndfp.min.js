(function outer(modules,cache,entries){var global=function(){return this}();function require(name,jumped){if(cache[name])return cache[name].exports;if(modules[name])return call(name,require);throw new Error('cannot find module "'+name+'"')}function call(id,require){var m=cache[id]={exports:{}};var mod=modules[id];var name=mod[2];var fn=mod[0];fn.call(m.exports,function(req){var dep=modules[id][1][req];return require(dep?dep:req)},m,m.exports,outer,modules,cache,entries);if(name)cache[name]=cache[id];return cache[id].exports}for(var id in entries){if(entries[id]){global[entries[id]]=require(id)}else{require(id)}}require.duo=true;require.cache=cache;require.modules=modules;return require})({1:[function(require,module,exports){(function(){var Plugin,aPlugin,attrs,buildqs,circPlus,debug,doc,fn,gsnContext,gsnSw2,gsndfpfactory,gsnpods,i,j,k,lastRefreshTime,len,len1,loadiframe,log,myGsn,myPlugin,oldGsnAdvertising,prefix,ref,ref1,script,trakless,trakless2,win;debug=require("debug");log=debug("gsndfp");trakless2=require("trakless");loadiframe=require("load-iframe");gsndfpfactory=require("./gsndfpfactory.coffee");if(typeof console!=="undefined"&&console!==null){if(console.log.bind!=null){log.log=console.log.bind(console)}}win=window;doc=win.document;gsnContext=win.gsnContext;trakless=win.trakless;myGsn=win.Gsn||{};oldGsnAdvertising=myGsn.Advertising;gsnSw2=new gsndfpfactory;gsnpods=new gsndfpfactory;circPlus=new gsndfpfactory;lastRefreshTime=0;if(oldGsnAdvertising!=null){if(oldGsnAdvertising.pluginLoaded){return}}Plugin=function(){function Plugin(){}Plugin.prototype.pluginLoaded=true;Plugin.prototype.defaultActionParam={page:void 0,evtname:void 0,dept:void 0,deviceid:void 0,storeid:void 0,consumerid:void 0,isanon:true,loyaltyid:void 0,aisle:void 0,category:void 0,shelf:void 0,brand:void 0,pcode:void 0,pdesc:void 0,latlng:void 0,evtcategory:void 0,evtvalue:void 0};Plugin.prototype.translator={siteid:"sid",page:"pg",evtname:"en",dept:"dpt",deviceid:"dvc",storeid:"str",consumerid:"cust",isanon:"isa",loyaltyid:"loy",aisle:"asl",category:"cat",shelf:"shf",brand:"brd",pcode:"pcd",pdesc:"pds",latlng:"latlng",evtcategory:"ec",evtvalue:"ev"};Plugin.prototype.isDebug=false;Plugin.prototype.gsnid=0;Plugin.prototype.selector="body";Plugin.prototype.apiUrl="https://clientapi.gsn2.com/api/v1";Plugin.prototype.gsnNetworkId=void 0;Plugin.prototype.gsnNetworkStore=void 0;Plugin.prototype.onAllEvents=void 0;Plugin.prototype.oldGsnAdvertising=oldGsnAdvertising;Plugin.prototype.minSecondBetweenRefresh=5;Plugin.prototype.enableCircPlus=false;Plugin.prototype.disableSw="";Plugin.prototype.source="";Plugin.prototype.targetting={};Plugin.prototype.depts=[];Plugin.prototype.circPlusBody=void 0;Plugin.prototype.refreshExisting={circPlus:false,pods:false};Plugin.prototype.circPlusDept=void 0;Plugin.prototype.timer=void 0;Plugin.prototype.getNetworkId=function(includeStore){var result,self;self=this;result=self.gsnNetworkId+((self.source||"").length>0?"."+self.source:"");if(includeStore){result=result.replace(/\/$/gi,"")+(self.gsnNetworkStore||"")}return result};Plugin.prototype.emit=function(en,ed){if(en.indexOf("gsnevent")<0){en="gsnevent:"+en}win.setTimeout(function(){trakless.broadcast(en,{type:en,detail:ed});if(typeof this.onAllEvents==="function"){this.onAllEvents({type:en,detail:ed})}},100);return this};Plugin.prototype.on=function(en,cb){if(en.indexOf("gsnevent")<0){en="gsnevent:"+en}trakless.on(en,cb);return this};Plugin.prototype.off=function(en,cb){if(en.indexOf("gsnevent")<0){en="gsnevent:"+en}trakless.off(en,cb);return this};Plugin.prototype.log=function(message){var self;self=myGsn.Advertising;if(self.isDebug||debug.enabled("gsndfp")){self.isDebug=true;if(typeof message==="object"){message=trakless.util.stringToJSON(message)}log(message)}return this};Plugin.prototype.trackAction=function(actionParam){var i,k,len,self,traker,translatedParam,v;self=myGsn.Advertising;translatedParam={};if(actionParam!=null){for(k=i=0,len=actionParam.length;i<len;k=++i){v=actionParam[k];translatedParam[self.translator[k]]=v}traker=trakless.getDefaultTracker();traker.track("gsn",translatedParam)}self.log(actionParam);return this};Plugin.prototype.cleanKeyword=function(keyword){var result;result=keyword.replace(/[^a-zA-Z0-9]+/gi,"_").replace(/^[_]+/gi,"");if(result.toLowerCase!=null){result=result.toLowerCase()}return result};Plugin.prototype.addDept=function(dept){var depts,goodDepts,i,len,oldDepts,self;self=myGsn.Advertising;if(dept!=null){oldDepts=self.depts;depts=[];goodDepts={};depts.push(self.cleanKeyword(dept));goodDepts[depts[0]]=1;self.circPlusDept=depts[0];for(i=0,len=oldDepts.length;i<len;i++){dept=oldDepts[i];if(goodDepts[dept]==null){depts.push(dept)}goodDepts[dept]=1}while(depts.length>5){depts.pop()}self.depts=depts}return this};Plugin.prototype.ajaxFireUrl=function(url){var img;if(typeof url==="string"){if(url.length<10){return}url=url.replace("%%CACHEBUSTER%%",(new Date).getTime());img=new Image(1,1);img.src=url}return this};Plugin.prototype.clickProduct=function(click,categoryId,brandName,productDescription,productCode,quantity,displaySize,regularPrice,currentPrice,savingsAmount,savingsStatement,adCode,creativeId){this.ajaxFireUrl(click);this.emit("clickProduct",{myPlugin:this,CategoryId:categoryId,BrandName:brandName,Description:productDescription,ProductCode:productCode,DisplaySize:displaySize,RegularPrice:regularPrice,CurrentPrice:currentPrice,SavingsAmount:savingsAmount,SavingsStatement:savingsStatement,AdCode:adCode,CreativeId:creativeId,Quantity:quantity||1});return this};Plugin.prototype.clickBrickOffer=function(click,offerCode,checkCode){this.ajaxFireUrl(click);this.emit("clickBrickOffer",{myPlugin:this,OfferCode:offerCode||0});return this};Plugin.prototype.clickBrand=function(click,brandName){this.ajaxFireUrl(click);this.setBrand(brandName);this.emit("clickBrand",{myPlugin:this,BrandName:brandName});return this};Plugin.prototype.clickPromotion=function(click,adCode){this.ajaxFireUrl(click);this.emit("clickPromotion",{myPlugin:this,AdCode:adCode});return this};Plugin.prototype.clickRecipe=function(click,recipeId){this.ajaxFireUrl(click);this.emit("clickRecipe",{RecipeId:recipeId});return this};Plugin.prototype.clickLink=function(click,url,target){if(target===void 0||target===""){target="_top"}this.ajaxFireUrl(click);this.emit("clickLink",{myPlugin:this,Url:url,Target:target});return this};Plugin.prototype.setBrand=function(brandName){trakless.util.session("gsndfp:brand",brandName);return this};Plugin.prototype.getBrand=function(){return trakless.util.session("gsndfp:brand")};Plugin.prototype.actionHandler=function(evt){var allData,elem,i,k,len,payLoad,realk,self,v;self=myGsn.Advertising;elem=evt.target?evt.target:evt.srcElement;payLoad={};if(elem!=null){allData=trakless.util.allData(elem);for(v=i=0,len=allData.length;i<len;v=++i){k=allData[v];if(!/^gsn/gi.test(k)){continue}realk=/^gsn/i.replace(k,"").toLowerCase();payLoad[realk]=v}}self.refresh(payLoad);return self};Plugin.prototype.refreshAdPodsInternal=function(actionParam,forceRefresh){var canRefresh,k,payLoad,ref,self,targetting,v;self=myGsn.Advertising;payLoad=actionParam||{};ref=self.defaultActionParam;for(k in ref){v=ref[k];if(v!=null){if(!payLoad[k]){payLoad[k]=v}}}if(gsnSw2.isVisible){return self}payLoad.siteid=self.gsnid;self.trackAction(payLoad);canRefresh=(new Date).getTime()/1e3-lastRefreshTime>=self.minSecondBetweenRefresh;if(forceRefresh||canRefresh){lastRefreshTime=(new Date).getTime()/1e3;if(payload.dept!=null){self.addDept(payLoad.dept)}if(forceRefresh){self.refreshExisting.pods=false;self.refreshExisting.circPlus=false}targetting={dept:self.depts||[],brand:self.getBrand()};if(payLoad.page){targetting.kw=payLoad.page.replace(/[^a-z]/gi,"")}gsnpods.refresh({setTargeting:targetting,sel:".gsnunit",refreshExisting:self.refreshExisting.pods});self.refreshExisting.pods=true;if(self.enableCircPlus){targetting.dept=[self.circPlusDept||"produce"];circPlus.refresh({setTargeting:targetting,bodyTemplate:self.bodyTemplate,sel:".circplus",refreshExisting:self.refreshExisting.circPlus});self.refreshExisting.circPlus=true}}return this};Plugin.prototype.refresh=function(actionParam,forceRefresh){var self;self=myGsn.Advertising;if(!self.hasGsnUnit()){return self}if(self.gsnid){if(gsnSw2.isVisible){return self}gsnSw2.refresh({displayWhenExists:".gsnadunit,.gsnunit",sel:".gsnsw",onData:function(evt){if((self.source||"").length>0){return evt.cancel=self.disableSw.indexOf(self.source)>0}},onClose:function(){if(self.selector!=null){trakless.util.$(self.selector)[0].onclick=function(e){e=e||win.event;e.target=e.target||e.srcElement||e.parentNode;if(win.gmodal.hasCls(e.target,"gsnaction")){return self.actionHandler(e)}};self.selector=null}return self.refreshAdPodsInternal(actionParam,forceRefresh)}})}return this};Plugin.prototype.hasGsnUnit=function(){return trakless.util.$(".gsnadunit,.gsnunit,.circplus").length>0};Plugin.prototype.setDefault=function(defaultParam){var k,self,v;self=myGsn.Advertising;for(k in defaultParam){v=defaultParam[k];if(v==null){self.defaultActionParam[k]=v}}return this};Plugin.prototype.refreshWithTimer=function(actionParam){var self,timer;self=myGsn.Advertising;if(actionParam==null){actionParam={evtname:"refresh-timer"}}self.refresh(actionParam,true);timer=(self.timer||0)*1e3;if(timer>0){setTimeout(self.refreshWithTimer,timer)}return this};Plugin.prototype.load=function(gsnid,isDebug){var self;self=myGsn.Advertising;if(gsnid){self.gsnid=gsnid;if(isDebug){debug.enable("gsndfp")}}return self.refreshWithTimer({evtname:"loading"})};return Plugin}();myPlugin=new Plugin;myGsn.Advertising=myPlugin;myGsn.Advertising.brickRedirect=myPlugin.clickBrickOffer;myGsn.Advertising.clickBrand=myPlugin.clickBrand;myGsn.Advertising.clickThru=myPlugin.clickProduct;myGsn.Advertising.refreshAdPods=myPlugin.refresh;myGsn.Advertising.logAdImpression=function(){};myGsn.Advertising.logAdRequest=function(){};myGsn.Advertising.promotionRedirect=myPlugin.clickPromotion;myGsn.Advertising.verifyClickThru=myPlugin.clickLink;myGsn.Advertising.recipeRedirect=myPlugin.clickRecipe;win.Gsn=myGsn;win.gsndfp=myGsn.Advertising;if(gsnContext!=null){buildqs=function(k,v){if(v!=null){v=new String(v);if(k!=="ProductDescription"){v=v.replace(/&/,"`")}return k+"="+v.toString()}else{}};myGsn.Advertising.on("clickRecipe",function(data){if(data.type!=="gsnevent:clickRecipe"){return}win.location.replace("/Recipes/RecipeFull.aspx?recipeid="+data.detail.RecipeId)});myGsn.Advertising.on("clickProduct",function(data){var product,qs;if(data.type!=="gsnevent:clickProduct"){return}product=data.detail;if(product){qs=new String("");qs+=buildqs("DepartmentID",product.CategoryId);qs+="~"+buildqs("BrandName",product.BrandName);qs+="~"+buildqs("ProductDescription",product.Description);qs+="~"+buildqs("ProductCode",product.ProductCode);qs+="~"+buildqs("DisplaySize",product.DisplaySize);qs+="~"+buildqs("RegularPrice",product.RegularPrice);qs+="~"+buildqs("CurrentPrice",product.CurrentPrice);qs+="~"+buildqs("SavingsAmount",product.SavingsAmount);qs+="~"+buildqs("SavingsStatement",product.SavingsStatement);qs+="~"+buildqs("Quantity",product.Quantity);qs+="~"+buildqs("AdCode",product.AdCode);qs+="~"+buildqs("CreativeID",product.CreativeId);if(typeof AddAdToShoppingList==="function"){AddAdToShoppingList(qs)}}});myGsn.Advertising.on("clickLink",function(data){var linkData;if(data.type!=="gsnevent:clickLink"){return}linkData=data.detail;if(linkData){if(linkData.Target===void 0||linkData.Target===""){linkData.Target="_top"}if(linkData.Target==="_blank"){win.open(linkData.Url)}else{win.location.replace(linkData.Url)}}});myGsn.Advertising.on("clickPromotion",function(data){var linkData;if(data.type!=="gsnevent:clickPromotion"){return}linkData=data.detail;if(linkData){win.location.replace("/Ads/Promotion.aspx?adcode="+linkData.AdCode)}});myGsn.Advertising.on("clickBrickOffer",function(data){var linkData,url;if(data.type!=="gsnevent:clickBrickOffer"){return}linkData=data.detail;if(linkData){url=myGsn.Advertising.apiUrl+"/profile/BrickOffer/"+gsnContext.ConsumerID+"/"+linkData.OfferCode;win.open(url,"")}})}aPlugin=myGsn.Advertising;if(!aPlugin){return}attrs={debug:function(value){if(typeof value!=="string"){return}aPlugin.isDebug=value!=="false";if(value){return debug.enable("gsndfp")}},api:function(value){if(typeof value!=="string"){return}return aPlugin.apiUrl=value},source:function(value){if(typeof value!=="string"){return}return aPlugin.source=value},gsnid:function(value){if(!value){return}aPlugin.gsnid=value;return trakless.setSiteId(value)},timer:function(value){if(!value){return}return aPlugin.timer=value},selector:function(value){if(typeof value!=="string"){return}return aPlugin.selector=value}};ref=doc.getElementsByTagName("script");for(i=0,len=ref.length;i<len;i++){script=ref[i];if(/gsndfp/i.test(script.src)){ref1=["","data-"];for(j=0,len1=ref1.length;j<len1;j++){prefix=ref1[j];for(k in attrs){fn=attrs[k];fn(script.getAttribute(prefix+k))}}}}trakless.setPixel("//pi.gsngrocers.com/pi.gif");trakless.store.init({url:"//cdn.gsngrocers.com/script/xstore.html",dntIgnore:true});if(aPlugin.hasGsnUnit()){aPlugin.load()}else{trakless.util.ready(function(){return aPlugin.load()})}module.exports=myGsn}).call(this)},{debug:2,trakless:3,"load-iframe":4,"./gsndfpfactory.coffee":5}],2:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;var storage;if(typeof chrome!=="undefined"&&typeof chrome.storage!=="undefined")storage=chrome.storage.local;else storage=localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){storage.removeItem("debug")}else{storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":6}],6:[function(require,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:7}],7:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],3:[function(require,module,exports){var $defaultTracker,$defaults,$pixel,$sessionid,$siteid,$trakless2,Emitter,attrs,cookie,defaults,doc,domevent,domify,fn,getImage,i,j,k,len,len1,mytrakless,myutil,prefix,query,ref,ref1,script,tracker,trakless,traklessParent,util,uuid,webanalyser,win,xstore;xstore=require("xstore");Emitter=require("emitter");domevent=require("domevent");cookie=require("cookie");defaults=require("defaults");query=require("querystring");uuid=require("uuid");webanalyser=require("webanalyser");domify=require("domify");win=window;doc=win.document;$defaultTracker=null;$siteid=0;$pixel="/pixel.gif";$defaults=null;$sessionid=cookie("trakless:usid");if($sessionid==null){$sessionid=(new Date).getTime();cookie("tls:usid",$sessionid,{path:"/"})}getImage=function(cfgUrl,request,callback){var image;image=new Image(1,1);image.onload=function(){var iterator;iterator=0;if(typeof callback==="function"){callback()}};image.src=cfgUrl+(cfgUrl.indexOf("?")<0?"?":"&")+request;return image};util=function(){function util(){}util.prototype.allData=function(el){var attr,camelCaseName,data,i,k,len,name,ref;data={};if(el!=null){ref=el.attributes;for(k=i=0,len=ref.length;i<len;k=++i){attr=ref[k];name=attr.name.replace(/^data-/g,"");camelCaseName=name.replace(/-(.)/g,function($0,$1){return $1.toUpperCase()});data[camelCaseName]=attr.value}}return data};util.prototype.$=domevent;util.prototype.stringToJSON=function(v){var v2;if(typeof v==="string"){if(v.indexOf("{")>=0||v.indexOf("[")>=0){v2=domevent.parseJSON(v);if(!(v2==null)){return v2}}}return v};util.prototype.session=function(k,v){if(v!=null){if(!(typeof v==="string")){v=domevent.toJSON(v)}cookie("tls:"+k,v,{path:"/"});return v}v=cookie("tls:"+k);if(typeof v==="undefined"){return v}return this.stringToJSON(v)};util.prototype.ready=domevent.ready;util.prototype.trim=function(v){return v.replace(/^\s+|\s+$/gm,"")};util.prototype.setClass=function(el,cls){return domevent(el).set("$",cls)};util.prototype.html=function(el,html){var newDiv;if(html!=null){while(el.firstChild!=null){el.removeChild(el.firstChild)}newDiv=domify(html);return el.appendChild(newDiv)}else{return el.innerHTML}};return util}();myutil=new util;tracker=function(){function tracker(){}tracker.prototype.defaults=webanalyser.getResult();tracker.prototype.pixel="/pixel.gif";tracker.prototype.siteid=0;tracker.prototype.store=null;tracker.prototype.uuid=null;tracker.prototype._trackit=function(myData,pixel){var self;self=this;myData.uuid=self.uuid;myData.siteid=self.siteid;myData.usid=$sessionid;getImage(pixel,query.stringify(myData));self.emit("track",myData.ht,myData);return self};tracker.prototype._track=function(ht,extra){var data,i,k,len,myData,myDef,pixel,self,v;self=this;if(extra==null){extra={}}if(self.siteid>0){pixel=myutil.trim(this.pixel);myDef=self.defaults;if(pixel.indexOf("//")===0&&myDef.dl.indexOf("http")!==0){pixel="http:"+pixel}data=ht==="pageview"?defaults(extra,myDef):extra;myData={};for(v=i=0,len=data.length;i<len;v=++i){k=data[v];if(v!=null){if(!(typeof v==="string")||myutil.trim(v).length>0){myData[k]=v}}}myData.z=(new Date).getTime();myData.ht=ht;if(!self.uuid){self.uuid=uuid();if(self.store!=null){self.store.get("trakless-uuid").then(function(id){if(!id){self.store.set("trakless-uuid",self.uuid)}self.uuid=id||self.uuid;return self._trackit(myData,pixel)})}}else{self._trackit(myData,pixel)}}return this};tracker.prototype.track=function(ht,extra){var self;self=this;myutil.ready(function(){return self._track(ht||"custom",extra)});return this};tracker.prototype.trackPageView=function(extra){return this.track("pageview",extra)};tracker.prototype.trackEvent=function(category,action,label,value){if(value&&value<0){value=null}return this.track("event",{ec:category||"event",ea:action,el:label,ev:value})};tracker.prototype.trackItemOrTransaction=function(id,name,price,quantity,code,category,currencycode){return this.track("item",{ti:id,"in":name,ip:price,iq:quantity,ic:code,iv:category,cu:currencycode})};tracker.prototype.trackTransaction=function(id,affiliation,revenue,shipping,tax,name,price,quantity,code,category,currencycode){return this.track("transaction",{ti:id,ta:affiliation,tr:revenue,ts:shipping,tt:tax,"in":name,ip:price,iq:quantity,ic:code,iv:category,cu:currencycode})};tracker.prototype.trackSocial=function(network,action,target){return this.track("social",{sn:network,sa:action,st:target})};tracker.prototype.trackException=function(description,isFatal){return this.track("exception",{exf:isFatal?1:0,exd:description})};tracker.prototype.trackApp=function(name,id,version,installerid){return this.track("app",{an:name,aid:id,av:version,aiid:installer})};tracker.prototype.trackCustom=function(customDataObject){return this.track("custom",customDataObject)};return tracker}();Emitter(tracker.prototype);mytrakless=function(){function mytrakless(){}mytrakless.prototype.setSiteId=function(siteid){$siteid=siteid>0?siteid:$siteid};mytrakless.prototype.setPixel=function(pixelUrl){$pixel=pixelUrl||$pixel};mytrakless.prototype.store=xstore;mytrakless.prototype.getTracker=function(siteid,pixelUrl){var rst;rst=new tracker(siteid,pixelUrl);rst.siteid=siteid||$siteid;rst.pixel=pixelUrl||$pixel;rst.store=xstore;return rst};mytrakless.prototype.getDefaultTracker=function(){if($defaultTracker==null){$defaultTracker=trakless.getTracker()}return $defaultTracker};mytrakless.prototype.util=myutil;mytrakless.prototype.broadcast=function(en,ed){if(typeof $trakless2!=="undefined"&&$trakless2!==null){$trakless2.emit(en,ed)}return this};return mytrakless}();trakless=new mytrakless;Emitter(trakless);$trakless2=trakless;if(win.top!==win){try{traklessParent=win.top.trakless;$trakless2=traklessParent}catch(_error){$trakless2=win.parent.trakless}}attrs={site:function(value){return trakless.setSiteId(value)},pixel:function(value){if(typeof value!=="string"){return}return trakless.setPixel(value)}};ref=win.document.getElementsByTagName("script");for(i=0,len=ref.length;i<len;i++){script=ref[i];if(/trakless/i.test(script.src)){ref1=["","data-"];for(j=0,len1=ref1.length;j<len1;j++){prefix=ref1[j];for(k in attrs){fn=attrs[k];fn(script.getAttribute(prefix+k))}}}}win.trakless=trakless;module.exports=trakless},{xstore:8,emitter:9,domevent:10,cookie:11,defaults:12,querystring:13,uuid:14,webanalyser:15,domify:16}],8:[function(require,module,exports){(function(win){var cacheBust,deferredObject,delay,dnt,doPostMessage,doc,handleMessageEvent,hash,iframe,load,lstore,mydeferred,myproxy,myq,onMessage,proxyPage,proxyWin,q,randomHash,store,usePostMessage,xstore;doc=win.document;load=require("load-iframe");store=require("store.js");proxyPage="http://niiknow.github.io/xstore/xstore.html";deferredObject={};iframe=void 0;proxyWin=void 0;usePostMessage=win.postMessage!=null;cacheBust=0;hash=void 0;delay=333;lstore={};myq=[];q=setInterval(function(){if(myq.length>0){return myq.shift()()}},delay+5);dnt=win.navigator.doNotTrack||navigator.msDoNotTrack||win.doNotTrack;onMessage=function(fn){if(win.addEventListener){return win.addEventListener("message",fn,false)}else{return win.attachEvent("onmessage",fn)}};mydeferred=function(){var i,k,len,ref,v;function mydeferred(){}mydeferred.prototype.q=function(event,item){var d,deferredHash,self;self=this;self.mycallbacks=[];self.myerrorbacks=[];deferredHash=randomHash();d=[0,deferredHash,event,item.k,item.v];deferredObject[deferredHash]=self;if(usePostMessage){doPostMessage(JSON.stringify(d))}else{if(iframe!==null){cacheBust+=1;d[0]=+new Date+cacheBust;hash="#"+JSON.stringify(d);if(iframe.src){iframe.src=""+proxyPage+hash}else if(iframe.contentWindow!=null&&iframe.contentWindow.location!=null){iframe.contentWindow.location=""+proxyPage+hash}else{iframe.setAttribute("src",""+proxyPage+hash)}}}self.then=function(fn,fnErr){if(fnErr){self.myerrorbacks.push(fnErr)}self.mycallbacks.push(fn);return self};return self};mydeferred.prototype.myresolve=function(data){var i,k,len,ref,self,v;self=this;ref=self.mycallbacks||[];for(k=i=0,len=ref.length;i<len;k=++i){v=ref[k];v(data)}return self};mydeferred.prototype.myreject=function(e){var self;return self=this};ref=self.myerrorbacks||[];for(k=i=0,len=ref.length;i<len;k=++i){v=ref[k];v(data)}self;return mydeferred}();myproxy=function(){function myproxy(){}myproxy.prototype.delay=333;myproxy.prototype.hash=win.location.hash;myproxy.prototype.init=function(){var self;self=this;if(usePostMessage){return onMessage(self.handleProxyMessage)}else{return setInterval(function(){var newhash;newhash=win.location.hash;if(newhash!==hash){hash=newhash;self.handleProxyMessage({data:JSON.parse(newhash.substr(1))})}},self.delay)}};myproxy.prototype.handleProxyMessage=function(e){var d,id,key,method,myCacheBust,self;d=e.data;if(typeof d==="string"){if(/^xstore-/.test(d)){d=d.split(",")}else{try{d=JSON.parse(d)}catch(_error){return}}}if(!(d instanceof Array)){return}id=d[1];if(!/^xstore-/.test(id)){return}self=this;key=d[3]||"xstore";method=d[2];cacheBust=0;if(method==="get"){d[4]=store.get(key)}else if(method==="set"){store.set(key,d[4])}else if(method==="remove"){store.remove(key)}else if(method==="clear"){store.clear()}else{d[2]="error-"+method}d[1]=id.replace("xstore-","xstoreproxy-");if(usePostMessage){e.source.postMessage(JSON.stringify(d),"*")}else{cacheBust+=1;myCacheBust=+new Date+cacheBust;d[0]=myCacheBust;hash="#"+JSON.stringify(d);win.location=win.location.href.replace(globals.location.hash,"")+hash}};return myproxy}();randomHash=function(){var rh;rh=Math.random().toString(36).substr(2);return"xstore-"+rh};doPostMessage=function(msg){if(proxyWin!=null){clearInterval(q);proxyWin.postMessage(msg,"*");return}return myq.push(function(){return doPostMessage(msg)})};handleMessageEvent=function(e){var d,di,id;d=e.data;if(typeof d==="string"){if(/^xstoreproxy-/.test(d)){d=d.split(",")}else{try{d=JSON.parse(d)}catch(_error){return}}}if(!(d instanceof Array)){return}id=d[1];if(!/^xstoreproxy-/.test(id)){return}id=id.replace("xstoreproxy-","xstore-");di=deferredObject[id];if(di){if(/^error-/.test(d[2])){di.myreject(d[2])}else{di.myresolve(d[4])}return delete deferredObject[id]}};xstore=function(){function xstore(){}xstore.prototype.hasInit=false;xstore.prototype.get=function(k){this.init();if(dnt){return{then:function(fn){return fn(lstore[k])}}}return(new mydeferred).q("get",{k:k})};xstore.prototype.set=function(k,v){this.init();if(dnt){return{then:function(fn){lstore[k]=v;return fn(lstore[k])}}}return(new mydeferred).q("set",{k:k,v:v})};xstore.prototype.remove=function(k){this.init();if(dnt){return{then:function(fn){delete lstore[k];return fn}}}return(new mydeferred).q("remove",{k:k})};xstore.prototype.clear=function(){this.init();if(dnt){return{then:function(fn){lstore={};return fn}}}return(new mydeferred).q("clear")};xstore.prototype.init=function(options){var self;self=this;if(self.hasInit){return self}self.hasInit=true;options=options||{};if(options.isProxy){(new myproxy).init();return}proxyPage=options.url||proxyPage;if(options.dntIgnore){dnt=false}if(!store.enabled){dnt=true}if(win.location.protocol==="https"){proxyPage=proxyPage.replace("http:","https:")}return iframe=load(proxyPage,function(){iframe.setAttribute("id","xstore");proxyWin=iframe.contentWindow;if(!usePostMessage){hash=proxyWin.location.hash;return setInterval(function(){if(proxyWin.location.hash!==hash){hash=proxyWin.location.hash;handleMessageEvent({origin:proxyDomain,data:hash.substr(1)})}},delay)}else{return onMessage(handleMessageEvent)}})};return xstore}();win.xstore=new xstore;return module.exports=win.xstore})(window)},{"load-iframe":4,"store.js":17}],4:[function(require,module,exports){var onload=require("script-onload");var tick=require("next-tick");var type=require("type");module.exports=function loadIframe(options,fn){if(!options)throw new Error("Cant load nothing...");if("string"==type(options))options={src:options};var https=document.location.protocol==="https:"||document.location.protocol==="chrome-extension:";if(options.src&&options.src.indexOf("//")===0){options.src=https?"https:"+options.src:"http:"+options.src}if(https&&options.https)options.src=options.https;else if(!https&&options.http)options.src=options.http;var iframe=document.createElement("iframe");iframe.src=options.src;iframe.width=options.width||1;iframe.height=options.height||1;iframe.style.display="none";if("function"==type(fn)){onload(iframe,fn)}tick(function(){var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(iframe,firstScript)});return iframe}},{"script-onload":18,"next-tick":19,type:20}],18:[function(require,module,exports){module.exports=function(el,fn){return el.addEventListener?add(el,fn):attach(el,fn)};function add(el,fn){el.addEventListener("load",function(_,e){fn(null,e)},false);el.addEventListener("error",function(e){var err=new Error('script error "'+el.src+'"');err.event=e;fn(err)},false)}function attach(el,fn){el.attachEvent("onreadystatechange",function(e){if(!/complete|loaded/.test(el.readyState))return;fn(null,e)});el.attachEvent("onerror",function(e){var err=new Error('failed to load the script "'+el.src+'"');err.event=e||window.event;fn(err)})}},{}],19:[function(require,module,exports){"use strict";if(typeof setImmediate=="function"){module.exports=function(f){setImmediate(f)}}else if(typeof process!="undefined"&&typeof process.nextTick=="function"){module.exports=process.nextTick}else if(typeof window=="undefined"||window.ActiveXObject||!window.postMessage){module.exports=function(f){setTimeout(f)}}else{var q=[];window.addEventListener("message",function(){var i=0;while(i<q.length){try{q[i++]()}catch(e){q=q.slice(i);window.postMessage("tic!","*");throw e}}q.length=0},true);module.exports=function(fn){
if(!q.length)window.postMessage("tic!","*");q.push(fn)}}},{}],20:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}if(val===null)return"null";if(val===undefined)return"undefined";if(val!==val)return"nan";if(val&&val.nodeType===1)return"element";val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val);return typeof val}},{}],17:[function(require,module,exports){(function(win){var store={},doc=win.document,localStorageName="localStorage",scriptTag="script",storage;store.disabled=false;store.version="1.3.17";store.set=function(key,value){};store.get=function(key,defaultVal){};store.has=function(key){return store.get(key)!==undefined};store.remove=function(key){};store.clear=function(){};store.transact=function(key,defaultVal,transactionFn){if(transactionFn==null){transactionFn=defaultVal;defaultVal=null}if(defaultVal==null){defaultVal={}}var val=store.get(key,defaultVal);transactionFn(val);store.set(key,val)};store.getAll=function(){};store.forEach=function(){};store.serialize=function(value){return JSON.stringify(value)};store.deserialize=function(value){if(typeof value!="string"){return undefined}try{return JSON.parse(value)}catch(e){return value||undefined}};function isLocalStorageNameSupported(){try{return localStorageName in win&&win[localStorageName]}catch(err){return false}}if(isLocalStorageNameSupported()){storage=win[localStorageName];store.set=function(key,val){if(val===undefined){return store.remove(key)}storage.setItem(key,store.serialize(val));return val};store.get=function(key,defaultVal){var val=store.deserialize(storage.getItem(key));return val===undefined?defaultVal:val};store.remove=function(key){storage.removeItem(key)};store.clear=function(){storage.clear()};store.getAll=function(){var ret={};store.forEach(function(key,val){ret[key]=val});return ret};store.forEach=function(callback){for(var i=0;i<storage.length;i++){var key=storage.key(i);callback(key,store.get(key))}}}else if(doc.documentElement.addBehavior){var storageOwner,storageContainer;try{storageContainer=new ActiveXObject("htmlfile");storageContainer.open();storageContainer.write("<"+scriptTag+">document.w=window</"+scriptTag+'><iframe src="/favicon.ico"></iframe>');storageContainer.close();storageOwner=storageContainer.w.frames[0].document;storage=storageOwner.createElement("div")}catch(e){storage=doc.createElement("div");storageOwner=doc.body}var withIEStorage=function(storeFunction){return function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(storage);storageOwner.appendChild(storage);storage.addBehavior("#default#userData");storage.load(localStorageName);var result=storeFunction.apply(store,args);storageOwner.removeChild(storage);return result}};var forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function ieKeyFix(key){return key.replace(/^d/,"___$&").replace(forbiddenCharsRegex,"___")}store.set=withIEStorage(function(storage,key,val){key=ieKeyFix(key);if(val===undefined){return store.remove(key)}storage.setAttribute(key,store.serialize(val));storage.save(localStorageName);return val});store.get=withIEStorage(function(storage,key,defaultVal){key=ieKeyFix(key);var val=store.deserialize(storage.getAttribute(key));return val===undefined?defaultVal:val});store.remove=withIEStorage(function(storage,key){key=ieKeyFix(key);storage.removeAttribute(key);storage.save(localStorageName)});store.clear=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes;storage.load(localStorageName);for(var i=0,attr;attr=attributes[i];i++){storage.removeAttribute(attr.name)}storage.save(localStorageName)});store.getAll=function(storage){var ret={};store.forEach(function(key,val){ret[key]=val});return ret};store.forEach=withIEStorage(function(storage,callback){var attributes=storage.XMLDocument.documentElement.attributes;for(var i=0,attr;attr=attributes[i];++i){callback(attr.name,store.deserialize(storage.getAttribute(attr.name)))}})}try{var testKey="__storejs__";store.set(testKey,testKey);if(store.get(testKey)!=testKey){store.disabled=true}store.remove(testKey)}catch(e){store.disabled=true}store.enabled=!store.disabled;if(typeof module!="undefined"&&module.exports&&this.module!==module){module.exports=store}else if(typeof define==="function"&&define.amd){define(store)}else{win.store=store}})(Function("return this")())},{}],9:[function(require,module,exports){var index=require("indexof");module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}fn._off=on;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this}var i=index(callbacks,fn._off||fn);if(~i)callbacks.splice(i,1);return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{indexof:21}],21:[function(require,module,exports){module.exports=function(arr,obj){if(arr.indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i}return-1}},{}],10:[function(require,module,exports){myObj=null;mydefine=function(h,F){myObj=F().$};mydefine("minified",function(){function z(a){return"string"==typeof a}function D(a){return a}function l(a,b,c){return(a!=k?""+a:"").replace(b,c!=k?c:"")}function u(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c||a,d,a[d]);return a}function q(a,b){if(a)for(var c=0;c<a.length;c++)b.call(a,a[c],c)}function K(a,b){var c=[],d=p(b)?b:function(a){return b!=a};q(a,function(b,g){d.call(a,b,g)&&c.push(b)});return c}function v(a,b,c){var d=[];a(b,function(a,g){r(a=c.call(b,a,g))?q(a,function(a){d.push(a)}):a!=k&&d.push(a)});return d}function B(a,b){var c=[];q(a,function(d,e){c.push(b.call(a,d,e))});return c}function E(a,b){var c=b||{},d;for(d in a)c[d]=a[d]}function F(a,b,c){if(p(a))return a.apply(c&&b,B(c||b,D))}function L(a){B(a,function(a){return F(a,void 0,void 0)})}function M(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function p(a){return"function"==typeof a&&!a.item}function r(a){return a&&a.length!=k&&!z(a)&&!(a&&a.nodeType)&&!p(a)&&a!==n}function N(a,b){var c=[],d={},e;m(a,function(a){m(b(a),function(a){d[e=a.Nia=a.Nia||++R]||(c.push(a),d[e]=!0)})});return c}function G(a,b){m(b,function(a){a.element.detachEvent("on"+a.g,a.h)})}function O(a){w?w.push(a):setTimeout(a,0)}function x(a,b,c){return p(a)?O(a):new C(t(a,b,c))}function t(a,b,c){function d(a){a=v(m,a,function T(a){return r(a)?v(m,a,T):a});return g?K(a,function(a){for(;a=a.parentNode;)if(a==g||c)return a==g}):a}function e(a,b){var c=RegExp("(^|\\s+)"+a+"(?=$|\\s)","i");return function(d){return a?c.test(d[b]):!0}}var g,f,h,k;if(b&&1!=(b=t(b)).length)return N(b,function(b){return t(a,b,c)});g=b&&b[0];if(!z(a))return d(a);if(g&&1!=(g&&g.nodeType))return[];if(1<(b=a.split(/\s*,\s*/)).length)return N(b,function(a){return t(a,g,c)});if(b=/(\S+)\s+(.+)$/.exec(a))return t(b[2],t(b[1],g),c);if(a!=(b=l(a,/^#/)))return d(document.getElementById(b));f=(b=/([\w-]*)\.?([\w-]*)/.exec(a))[1];k=b[2];b=(h=document.getElementsByClassName&&k)?(g||document).getElementsByClassName(k):(g||document).getElementsByTagName(f||"*");if(f=h?f:k)b=K(b,e(f,h?"tagName":"className"));return c?d(b):b}function m(a,b){r(a)?q(a,b):a!=k&&b(a,0);return a}function H(){function a(a,d){b==k&&a!=k&&(b=a,f=r(d)?d:[d],setTimeout(function(){q(c,function(a){a()})},0));return b}var b,c=[],d=arguments,e=d.length,g=0,f=[];q(d,function S(b,c){try{b.then?b.then(function(b){var d;(b&&"object"==typeof b||p(b))&&p(d=b.then)?S(d,c):(f[c]=B(arguments,D),++g==e&&a(!0,2>e?f[c]:f))},function(b){f[c]=B(arguments,D);a(!1,2>e?f[c]:[f[c][0],f,c])}):b(function(){a(!0,arguments)},function(){a(!1,arguments)})}catch(d){a(!1,[d,f,c])}});a.stop=function(){q(d,function(a){a.stop&&a.stop()});return F(a.stop0)};var h=a.then=function(d,g){function e(){try{var a=b?d:g;p(a)?function U(a){try{var b,c=0;if((a&&"object"==typeof a||p(a))&&p(b=a.then)){if(a===h)throw new TypeError;b.call(a,function(a){c++||U(a)},function(a){c++||h(!1,[a])});h.stop0=a.stop}else h(!0,[a])}catch(d){c++||h(!1,[d])}}(F(a,P,f)):h(b,f)}catch(c){h(!1,[c])}}var h=H();h.stop0=a.stop;b!=k?setTimeout(e,0):c.push(e);return h};a.always=function(a){return h(a,a)};a.error=function(a){return h(0,a)};return a}function C(a,b){var c=0;if(a)for(var d=0,e=a.length;d<e;d++){var g=a[d];if(b&&r(g))for(var f=0,h=g.length;f<h;f++)this[c++]=g[f];else this[c++]=g}else this[c++]=b;this.length=c;this._=!0}var n=this,I={},J={},R=1,A={},w=/^[ic]/.test(document.readyState)?k:[],y=!!document.all&&!document.addEventListener,k=null,P;E({d:0,remove:function(){m(this,function(a){y&&1==(a&&a.nodeType)&&(m(t("*",a),function(a){G(0,A[a.Nia]);delete A[a.Nia]}),G(0,A[a.Nia]),delete A[a.Nia]);a.parentNode.removeChild(a)})},get:function(a,b){var c=this,d=c[0];if(d){if(z(a)){var e=/^(\W*)(.*)/.exec(l(a,/^%/,"@data-")),g=e[1],d=J[g]?J[g](this,e[2]):"$"==a?c.get("className"):"$$"==a?y?d.style.cssText:c.get("@style"):"$$slide"==a?c.get("$height"):"$$fade"==a||"$$show"==a?"hidden"==c.get("$visibility")||"none"==c.get("$display")?0:"$$fade"==a?y?isNaN(c.get("$filter",!0))?1:c.get("$filter",!0)/100:isNaN(c.get("$opacity",!0))?1:c.get("$opacity",!0):1:"$$scrollX"==a?n.pageXOffset!=k?n.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft:"$$scrollY"==a?n.pageXOffset!=k?n.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop:"$"==g?n.getComputedStyle?n.getComputedStyle(d,k).getPropertyValue(l(e[2],/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):(d.currentStyle||d.style)[l(e[2],/^float$/,"cssFloat")]:"@"==g?d.getAttribute(e[2]):d[e[2]];return b?parseFloat(l(d,/^[^\d-]+/)):d}var f={};(r(a)?m:u)(a,function(a){f[a]=c.get(a,b)});return f}},set:function(a,b){var c=this;if(b!==P){var d=/^(\W*)(.*)/.exec(l(l(a,/^\$float$/,"cssFloat"),/^%/,"@data-")),e=d[1];if(I[e])I[e](this,d[2],b);else"$$fade"==a?c.set({$visibility:b?"visible":"hidden"}).set(y?1>b?{$filter:"alpha(opacity = "+100*b+")",$zoom:1}:{$filter:""}:{$opacity:b}):"$$slide"==a?c.set({$visibility:b?"visible":"hidden",$overflow:"hidden",$height:/px/.test(b)?b:function(a,c,d){a=x(d);d={$position:"absolute",$visibility:"hidden",$display:"block",$height:k};c=a.get(d);d=a.set(d).get("clientHeight");a.set(c);return d*b+"px"}}):"$$show"==a?b?c.set({$visibility:b?"visible":"hidden",$display:""}).set({$display:function(a){return"none"==a?"block":a}}):c.set({$display:"none"}):"$$"==a?y?c.set("$cssText",b):c.set("@style",b):m(this,function(c,f){var h=p(b)?b(x(c).get(a),f,c):b;"$"==e?d[2]?c.style[d[2]]=h:m(h&&h.split(/\s+/),function(a){var b=l(a,/^[+-]/),d=c.className||"",e=l(d,RegExp("(^|\\s+)"+b+"(?=$|\\s)"));if(/^\+/.test(a)||b==a&&d==e)e+=" "+b;c.className=l(e,/^\s+|\s+$/g)}):"$$scrollX"==a?c.scroll(h,x(c).get("$$scrollY")):"$$scrollY"==a?c.scroll(x(c).get("$$scrollX"),h):"@"==e?h==k?c.removeAttribute(d[2]):c.setAttribute(d[2],h):c[d[2]]=h})}else z(a)||p(a)?c.set("$",a):u(a,function(a,b){c.set(a,b)});return c},e:0,b:0},C.prototype);E({request:function(a,b,c,d){d=d||{};var e,g=0,f=H(),h=c&&c.constructor==d.constructor;try{f.xhr=e=n.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Msxml2.XMLHTTP.3.0"),f.stop0=function(){e.abort()},h&&(c=v(u,c,function(a,b){return v(m,b,function(b){return encodeURIComponent(a)+(b!=k?"="+encodeURIComponent(b):"")})}).join("&")),c==k||/post/i.test(a)||(b+="?"+c,c=k),e.open(a,b,!0,d.user,d.pass),h&&/post/i.test(a)&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u(d.headers,function(a,b){e.setRequestHeader(a,b)}),u(d.xhr,function(a,b){e[a]=b}),e.onreadystatechange=function(){4!=e.readyState||g++||(200==e.status?f(!0,[e.responseText,e]):f(!1,[e.status,e.responseText,e]))},e.send(c)}catch(l){g||f(!1,[0,k,l!=k?""+l:""])}return f},toJSON:function b(c){return c==k?""+c:z(c=c.valueOf())?'"'+l(c,/[\\\"\x00-\x1f\u2028\u2029]/g,M)+'"':r(c)?"["+v(m,c,b).join()+"]":c&&"object"==typeof c?"{"+v(u,c,function(c,e){return b(c)+":"+b(e)}).join()+"}":c!=k?""+c:""},parseJSON:n.JSON?n.JSON.parse:function(b){b=l(b,/[\x00\xad\u0600-\uffff]/g,M);if(/^[[\],:{}\s]*$/.test(l(l(b,/\\["\\\/bfnrtu]/g),/"[^"\\\n\r]*"|true|false|null|[\d.eE+-]+/g)))return eval("("+b+")")},ready:O,c:null,f:0},x);E({a:0,promise:H},function(){return new C(arguments,!0)});if(y){var Q=function(){L(w);w=k};document.attachEvent("onreadystatechange",function(){/^[ic]/.test(document.readyState)&&Q()});n.attachEvent("onload",Q)}else document.addEventListener("DOMContentLoaded",function(){L(w);w=k},!1);n.i=function(){m(A,G)};return{$:x,M:C,getter:J,setter:I}});module.exports=myObj},{}],11:[function(require,module,exports){var debug=require("debug")("cookie");module.exports=function(name,value,options){switch(arguments.length){case 3:case 2:return set(name,value,options);case 1:return get(name);default:return all()}};function set(name,value,options){options=options||{};var str=encode(name)+"="+encode(value);if(null==value)options.maxage=-1;if(options.maxage){options.expires=new Date(+new Date+options.maxage)}if(options.path)str+="; path="+options.path;if(options.domain)str+="; domain="+options.domain;if(options.expires)str+="; expires="+options.expires.toUTCString();if(options.secure)str+="; secure";document.cookie=str}function all(){return parse(document.cookie)}function get(name){return all()[name]}function parse(str){var obj={};var pairs=str.split(/ *; */);var pair;if(""==pairs[0])return obj;for(var i=0;i<pairs.length;++i){pair=pairs[i].split("=");obj[decode(pair[0])]=decode(pair[1])}return obj}function encode(value){try{return encodeURIComponent(value)}catch(e){debug("error `encode(%o)` - %o",value,e)}}function decode(value){try{return decodeURIComponent(value)}catch(e){debug("error `decode(%o)` - %o",value,e)}}},{debug:2}],12:[function(require,module,exports){"use strict";var defaults=function(dest,src,recursive){for(var prop in src){if(recursive&&dest[prop]instanceof Object&&src[prop]instanceof Object){dest[prop]=defaults(dest[prop],src[prop],true)}else if(!(prop in dest)){dest[prop]=src[prop]}}return dest};module.exports=defaults},{}],13:[function(require,module,exports){var encode=encodeURIComponent;var decode=decodeURIComponent;var trim=require("trim");var type=require("type");exports.parse=function(str){if("string"!=typeof str)return{};str=trim(str);if(""==str)return{};if("?"==str.charAt(0))str=str.slice(1);var obj={};var pairs=str.split("&");for(var i=0;i<pairs.length;i++){var parts=pairs[i].split("=");var key=decode(parts[0]);var m;if(m=/(\w+)\[(\d+)\]/.exec(key)){obj[m[1]]=obj[m[1]]||[];obj[m[1]][m[2]]=decode(parts[1]);continue}obj[parts[0]]=null==parts[1]?"":decode(parts[1])}return obj};exports.stringify=function(obj){if(!obj)return"";var pairs=[];for(var key in obj){var value=obj[key];if("array"==type(value)){for(var i=0;i<value.length;++i){pairs.push(encode(key+"["+i+"]")+"="+encode(value[i]))}continue}pairs.push(encode(key)+"="+encode(obj[key]))}return pairs.join("&")}},{trim:22,type:20}],22:[function(require,module,exports){exports=module.exports=trim;function trim(str){if(str.trim)return str.trim();return str.replace(/^\s*|\s*$/g,"")}exports.left=function(str){if(str.trimLeft)return str.trimLeft();return str.replace(/^\s*/,"")};exports.right=function(str){if(str.trimRight)return str.trimRight();return str.replace(/\s*$/,"")}},{}],14:[function(require,module,exports){module.exports=function uuid(a){return a?(a^Math.random()*16>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,uuid)}},{}],15:[function(require,module,exports){(function(document,navigator,screen,location){"use strict";var $defaults,$endTime,$onLoadHandlers,$startTime,$timeoutId,defaults,flashdetect,result,webanalyser;defaults=require("defaults");flashdetect=require("flashdetect");$startTime=(new Date).getTime();$endTime=(new Date).getTime();$timeoutId=null;$onLoadHandlers=[];$defaults={sr:screen.width+"x"+screen.height,vp:screen.availWidth+"x"+screen.availHeight,sd:screen.colorDepth,je:navigator.javaEnabled?navigator.javaEnabled():false,ul:navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage||navigator.browserLanguage};webanalyser=function(){function webanalyser(){}webanalyser.prototype.getResult=function(){var rst;if(defaults.dl==null){rst={dr:document.referrer,dl:location.href,dh:location.hostname,dt:document.title,z:(new Date).getTime()};if(flashdetect.installed){rst.fl=flashdetect.major+" "+flashdetect.minor+" "+flashdetect.revisionStr}$defaults=defaults(rst,$defaults)}return $defaults};return webanalyser}();result=new webanalyser;return module.exports=result})(document,navigator,screen,location)},{defaults:12,flashdetect:23}],23:[function(require,module,exports){var flashdetect=new function(){var self=this;self.installed=false;self.raw="";self.major=-1;self.minor=-1;self.revision=-1;self.revisionStr="";var activeXDetectRules=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(obj){return getActiveXVersion(obj)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(obj){var version="6,0,21";try{obj.AllowScriptAccess="always";version=getActiveXVersion(obj)}catch(err){}return version}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(obj){return getActiveXVersion(obj)}}];var getActiveXVersion=function(activeXObj){var version=-1;try{version=activeXObj.GetVariable("$version")}catch(err){}return version};var getActiveXObject=function(name){var obj=-1;try{obj=new ActiveXObject(name)}catch(err){obj={activeXError:true}}return obj};var parseActiveXVersion=function(str){var versionArray=str.split(",");return{raw:str,major:parseInt(versionArray[0].split(" ")[1],10),minor:parseInt(versionArray[1],10),revision:parseInt(versionArray[2],10),revisionStr:versionArray[2]}};var parseStandardVersion=function(str){var descParts=str.split(/ +/);var majorMinor=descParts[2].split(/\./);var revisionStr=descParts[3];return{raw:str,major:parseInt(majorMinor[0],10),minor:parseInt(majorMinor[1],10),revisionStr:revisionStr,revision:parseRevisionStrToInt(revisionStr)}};var parseRevisionStrToInt=function(str){return parseInt(str.replace(/[a-zA-Z]/g,""),10)||self.revision};self.majorAtLeast=function(version){return self.major>=version};self.minorAtLeast=function(version){return self.minor>=version};self.revisionAtLeast=function(version){return self.revision>=version};self.versionAtLeast=function(major){var properties=[self.major,self.minor,self.revision];var len=Math.min(properties.length,arguments.length);for(i=0;i<len;i++){if(properties[i]>=arguments[i]){if(i+1<len&&properties[i]==arguments[i]){continue}else{return true}}else{return false}}};self.flashdetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var type="application/x-shockwave-flash";var mimeTypes=navigator.mimeTypes;if(mimeTypes&&mimeTypes[type]&&mimeTypes[type].enabledPlugin&&mimeTypes[type].enabledPlugin.description){var version=mimeTypes[type].enabledPlugin.description;var versionObj=parseStandardVersion(version);self.raw=versionObj.raw;self.major=versionObj.major;self.minor=versionObj.minor;self.revisionStr=versionObj.revisionStr;self.revision=versionObj.revision;self.installed=true}}else if(navigator.appVersion.indexOf("Mac")==-1&&window.execScript){var version=-1;for(var i=0;i<activeXDetectRules.length&&version==-1;i++){var obj=getActiveXObject(activeXDetectRules[i].name);if(!obj.activeXError){self.installed=true;version=activeXDetectRules[i].version(obj);if(version!=-1){var versionObj=parseActiveXVersion(version);self.raw=versionObj.raw;self.major=versionObj.major;self.minor=versionObj.minor;self.revision=versionObj.revision;self.revisionStr=versionObj.revisionStr}}}}}()};flashdetect.JS_RELEASE="1.0.4";module.exports=flashdetect},{}],16:[function(require,module,exports){module.exports=parse;var div=document.createElement("div");div.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';var innerHTMLBug=!div.getElementsByTagName("link").length;div=undefined;var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:innerHTMLBug?[1,"X<div>","</div>"]:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"];map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"];map.polyline=map.ellipse=map.polygon=map.circle=map.text=map.line=map.path=map.rect=map.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function parse(html,doc){if("string"!=typeof html)throw new TypeError("String expected");if(!doc)doc=document;var m=/<([\w:]+)/.exec(html);if(!m)return doc.createTextNode(html);html=html.replace(/^\s+|\s+$/g,"");var tag=m[1];if(tag=="body"){var el=doc.createElement("html");el.innerHTML=html;return el.removeChild(el.lastChild)}var wrap=map[tag]||map._default;var depth=wrap[0];var prefix=wrap[1];var suffix=wrap[2];var el=doc.createElement("div");el.innerHTML=prefix+html+suffix;while(depth--)el=el.lastChild;if(el.firstChild==el.lastChild){return el.removeChild(el.firstChild)}var fragment=doc.createDocumentFragment();while(el.firstChild){fragment.appendChild(el.removeChild(el.firstChild))}return fragment}},{}],5:[function(require,module,exports){(function(){(function(win){"use strict";var $doc,$win,adUnitById,circplusTemplate,gmodal,gsnSw,gsndfpfactory,loadScript,qsel,swcss,trakless,trakless2;trakless2=require("trakless");trakless=win.trakless;gmodal=require("gmodal");swcss=require("./sw.css");circplusTemplate=require("./circplus.html");loadScript=require("load-script");$win=win;qsel=$win.trakless.util.$;$doc=$win.document;gsnSw=null;adUnitById={};gsndfpfactory=function(){function gsndfpfactory(){}gsndfpfactory.prototype.dfpID="";gsndfpfactory.prototype.count=0;gsndfpfactory.prototype.rendered=0;gsndfpfactory.prototype.sel=".gsnunit";gsndfpfactory.prototype.dops={};gsndfpfactory.prototype.isLoaded=false;gsndfpfactory.prototype.$ads=void 0;gsndfpfactory.prototype.adBlockerOn=false;gsndfpfactory.prototype.storeAs="gsnunit";gsndfpfactory.prototype.lastRefresh=0;gsndfpfactory.prototype.didOpen=false;gsndfpfactory.prototype.isVisible=false;gsndfpfactory.prototype.ieOld=false;gsndfpfactory.prototype.bodyTemplate=circplusTemplate;gsndfpfactory.prototype.refresh=function(options){var cp,currentTime,selector,self;self=this;self.dfpLoader();options=options||{};self.dfpID=gsndfp.getNetworkId(true);self.setOptions(options);self.sel=options.sel||".gsnunit";options=self.dops;selector=self.sel;if(typeof self.adUnitId!=="object"){self.adUnitById={}}if(!($win.opera&&$win.opera.version)){self.ieOld=$doc.all&&!$win.atop}if(self.ieOld){self.dops.inViewOnly=false}if(selector===".circplus"){self.storeAs="circplus";cp=qsel(selector);if(cp.length>0){trakless.util.html(cp[0],options.bodyTemplate||self.bodyTemplate)}self.$ads=[qsel(".cpslot1")[0],qsel(".cpslot2")[0]];if(self.$ads[0]){self.createAds();self.displayAds()}}else if(selector===".gsnsw"){$win.gmodal.injectStyle("swcss",swcss);gsnSw=self;self.dops.enableSingleRequest=true;self.dfpID=gsndfp.getNetworkId();if(qsel(options.displayWhenExists||".gsnunit").length<=0){return}self.storeAs="gsnsw";if(self.didOpen||self.getCookie("gsnsw2")!=null){self.onCloseCallback({cancel:true})}else{currentTime=(new Date).getTime();if(currentTime-self.lastRefresh<1e3){return self}self.lastRefresh=currentTime;self.getPopup(selector)}return self}else{self.storeAs="gsnunit";self.$ads=qsel(selector);self.createAds();self.displayAds()}return this};gsndfpfactory.prototype.setOptions=function(options){var dops,k,self,v;self=this;dops={setTargeting:{},setCategoryExclusion:"",setLocation:"",enableSingleRequest:false,collapseEmptyDivs:true,refreshExisting:true,disablePublisherConsole:false,disableInitialLoad:false,inViewOnly:true,noFetch:false};for(k in options){v=options[k];dops[k]=v}self.dops=dops;return this};gsndfpfactory.prototype.onOpenCallback=function(event){var self;self=gsnSw;gsndfp.on("clickBrand",function(e){$win.gmodal.hide()});self.didOpen=true;self.isVisible=true;self.$ads=qsel(self.sel);self.createAds();self.displayAds();setTimeout(function(){if(self.adBlockerOn){qsel(".remove").remove();qsel(".sw-msg")[0].style.display="block";qsel(".sw-header-copy")[0].style.display="none";qsel(".sw-row")[0].style.display="none"}},150)};gsndfpfactory.prototype.onCloseCallback=function(event){var self;self=gsnSw;self.isVisible=false;$win.scrollTo(0,0);if(!self.getCookie("gsnsw2")){self.setCookie("gsnsw2",gsndfp.gsnNetworkId+","+gsndfp.enableCircPlus+","+gsndfp.disableSw,1)}if(typeof self.dops.onClose==="function"){self.dops.onClose(self.didOpen)}};gsndfpfactory.prototype.swSucccess=function(myrsp){var data,evt,rsp,self;rsp=myrsp;if(typeof myrsp==="string"){rsp=JSON.parse(myrsp)}self=gsnSw;if(rsp){if(!gsndfp.gsnNetworkId){gsndfp.gsnNetworkId=rsp.NetworkId}gsndfp.enableCircPlus=rsp.EnableCircPlus;gsndfp.disableSw=rsp.DisableSw;data=rsp.Template}self.dfpID=gsndfp.getNetworkId();evt={data:rsp,cancel:false};self.dops.onData(evt);if(evt.cancel){data=null}if(data){data=data.replace(/%%CACHEBUSTER%%/g,(new Date).getTime()).replace(/%%CHAINID%%/g,gsndfp.gsnid);$win.gmodal.on("show",self.onOpenCallback);$win.gmodal.on("hide",self.onCloseCallback);$win.gmodal.on("click",function(evt){var target;target=evt.target||evt.srcElement;if(target.className.indexOf("sw-close")>=0){return $win.gmodal.hide()}});$win.gmodal.show({content:"<div id='sw'>"+data+"<div>",closeCls:"sw-close"})}else{self.onCloseCallback({cancel:true})}return this};gsndfpfactory.prototype.getPopup=function(selector){var dataType,self,url;self=this;url=gsndfp.apiUrl+"/ShopperWelcome/Get/"+gsndfp.gsnid;dataType="json";if(self.ieOld){$win.gsnswCallback=function(rsp){return self.swSucccess(rsp)};url+="?callback=gsnswCallback";dataType="jsonp"}if(dataType==="jsonp"){loadScript(url)}else{qsel.request("GET",url).then(self.swSucccess)}return this};gsndfpfactory.prototype.getCookie=function(nameOfCookie){var begin,cookieData,cookieDatas,end;if($doc.cookie.length>0){begin=$doc.cookie.indexOf(nameOfCookie+"=");end=0;if(begin!==-1){begin+=nameOfCookie.length+1;end=$doc.cookie.indexOf(";",begin);if(end===-1){end=$doc.cookie.length}cookieData=decodeURI($doc.cookie.substring(begin,end));if(cookieData.indexOf(",")>0){cookieDatas=cookieData.split(",");gsndfp.gsnNetworkId=cookieDatas[0];gsndfp.enableCircPlus=cookieData[1];gsndfp.disableSw=cookieData[2]}return cookieData}}return null};gsndfpfactory.prototype.setCookie=function(nameOfCookie,value,expiredays){var ExpireDate;ExpireDate=new Date;ExpireDate.setTime(ExpireDate.getTime()+expiredays*24*3600*1e3);$doc.cookie=nameOfCookie+"="+encodeURI(value)+(expiredays===null?"":"; expires="+ExpireDate.toGMTString())+"; path=/"};gsndfpfactory.prototype.clearCookie=function(nameOfCookie){var self;self=this;if(nameOfCookie===self.getCookie(nameOfCookie)){$doc.cookie=nameOfCookie+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"}};gsndfpfactory.prototype.createAds=function(){var $adUnit,$existingContent,adUnit,adUnitID,allData,dimensions,i,k,len,ref,self;self=this;self.dfpID=gsndfp.getNetworkId();ref=self.$ads;for(k=i=0,len=ref.length;i<len;k=++i){adUnit=ref[k];$adUnit=qsel(adUnit);allData=trakless.util.allData(adUnit);adUnitID=self.getID($adUnit,self.storeAs,adUnit);dimensions=self.getDimensions($adUnit,allData);$existingContent=adUnit.innerHTML;trakless.util.html(adUnit,"");$adUnit.set("$","+display-none");$win.googletag.cmd.push(function(){var $adUnitData,companion,exclusions,exclusionsGroup,j,len1,targeting,v,valueTrimmed;$adUnitData=self.adUnitById[adUnitID];if($adUnitData){return}self.dfpID=self.dfpID.replace(/(\/\/)+/gi,"/").replace(/\s+/gi,"").replace(/(\/)$/,"/");if(self.dfpID.indexOf("/")!==0){self.dfpID="/"+dfpID}if(allData["outofpage"]){$adUnitData=$win.googletag.defineOutOfPageSlot(self.dfpID,adUnitID).addService($win.googletag.pubads())}else{$adUnitData=$win.googletag.defineSlot(self.dfpID,dimensions,adUnitID).addService($win.googletag.pubads())}companion=allData["companion"];if(companion!=null){$adUnitData.addService($win.googletag.companionAds())}targeting=allData["targeting"];if(targeting){if(typeof targeting==="string"){targeting=eval("("+targeting+")")}for(k in targeting){v=targeting[k];if(k==="brand"){gsndfp.setBrand(v)}$adUnitData.setTargeting(k,v)}}exclusions=allData["exclusions"];if(exclusions){exclusionsGroup=exclusions.split(",");valueTrimmed=void 0;for(k=j=0,len1=exclusionsGroup.length;j<len1;k=++j){v=exclusionsGroup[k];valueTrimmed=trakless.util.trim(v);if(valueTrimmed.length>0){$adUnitData.setCategoryExclusion(valueTrimmed)}return}}self.adUnitById[adUnitID]=$adUnitData;$adUnitData.oldRenderEnded=$adUnitData.oldRenderEnded||$adUnitData.renderEnded;$adUnitData.renderEnded=function(){var display;self.rendered++;display=adUnit.style.display;$adUnit.set("$","-display-none").set("$","+display-"+display);$adUnitData.existing=true;if($adUnitData.oldRenderEnded!=null){$adUnitData.oldRenderEnded()}if(typeof self.dops.afterEachAdLoaded==="function"){self.dops.afterEachAdLoaded.call(self,$adUnit,$adUnitData)}}})}$win.googletag.cmd.push(function(){var brand,exclusionsGroup,j,len1,ref1,v,valueTrimmed;if(typeof self.dops.setTargeting["brand"]==="undefined"){brand=gsndfp.getBrand();if(brand!=null){self.dops.setTargeting["brand"]=brand}}if(self.dops.enableSingleRequest){$win.googletag.pubads().enableSingleRequest()}ref1=self.dops.setTargeting;for(k in ref1){v=ref1[k];if(k==="brand"){gsndfp.setBrand(v)}$win.googletag.pubads().setTargeting(k,v)}if(typeof self.dops.setLocation==="object"){if(typeof self.dops.setLocation.latitude==="number"&&typeof self.dops.setLocation.longitude==="number"&&typeof self.dops.setLocation.precision==="number"){$win.googletag.pubads().setLocation(self.dops.setLocation.latitude,self.dops.setLocation.longitude,self.dops.setLocation.precision)}else if(typeof self.dops.setLocation.latitude==="number"&&typeof self.dops.setLocation.longitude==="number"){$win.googletag.pubads().setLocation(self.dops.setLocation.latitude,self.dops.setLocation.longitude)}}if(self.dops.setCategoryExclusion.length>0){exclusionsGroup=self.dops.setCategoryExclusion.split(",");for(k=j=0,len1=exclusionsGroup.length;j<len1;k=++j){v=exclusionsGroup[k];valueTrimmed=trakless.util.trim(v);if(valueTrimmed.length>0){$win.googletag.pubads().setCategoryExclusion(valueTrimmed)}}}if(self.dops.collapseEmptyDivs||self.dops.collapseEmptyDivs==="original"){$win.googletag.pubads().collapseEmptyDivs()}if(self.dops.disablePublisherConsole){$win.googletag.pubads().disablePublisherConsole()}if(self.dops.disableInitialLoad){$win.googletag.pubads().disableInitialLoad()}if(self.dops.noFetch){$win.googletag.pubads().noFetch()}if(self.sel===".circplus"){$win.googletag.companionAds().setRefreshUnfilledSlots(true);

}$win.googletag.enableServices()})};gsndfpfactory.prototype.isHeightInView=function(el){var isVisible,overhang,percentVisible,rect;percentVisible=.5;rect=el.getBoundingClientRect();overhang=rect.height*(1-percentVisible);isVisible=rect.top>=-overhang&&rect.bottom<=window.innerHeight+overhang;return isVisible};gsndfpfactory.prototype.displayAds=function(){var $adUnit,$adUnitData,adUnit,i,id,k,len,ref,self,toPush;self=this;toPush=[];ref=self.$ads;for(k=i=0,len=ref.length;i<len;k=++i){adUnit=ref[k];$adUnit=qsel(adUnit);id=$adUnit.get("@id");$adUnitData=self.adUnitById[id];if($adUnitData!=null){if(!self.dops.inViewOnly||self.isHeightInView(adUnit)){if($adUnitData.existing){toPush.push($adUnitData)}else{$win.googletag.cmd.push(function(){return $win.googletag.display(id)})}}}else{$win.googletag.cmd.push(function(){return $win.googletag.display(id)})}}if(toPush.length>0){$win.googletag.cmd.push(function(){return $win.googletag.pubads().refresh(toPush)})}};gsndfpfactory.prototype.getID=function($adUnit,adUnitName,adUnit){var id,self;self=this;id=$adUnit.get("@id");if((id||"").length<=0){id=adUnitName+"$auto$gen$id$"+self.count++;$adUnit.set("@id",id)}return id};gsndfpfactory.prototype.getDimensions=function($adUnit,allData){var dimensionGroups,dimensionSet,dimensions,dimensionsData,i,k,len,v;dimensions=[];dimensionsData=allData["dimensions"];if(dimensionsData){dimensionGroups=dimensionsData.split(",");for(k=i=0,len=dimensionGroups.length;i<len;k=++i){v=dimensionGroups[k];dimensionSet=v.split("x");dimensions.push([parseInt(dimensionSet[0],10),parseInt(dimensionSet[1],10)])}}return dimensions};gsndfpfactory.prototype.dfpLoader=function(){var gads;if(self.isLoaded){return}$win.googletag=$win.googletag||{};$win.googletag.cmd=$win.googletag.cmd||[];gads=$doc.createElement("script");gads.async=true;gads.type="text/javascript";gads.onerror=function(){self.dfpBlocked()};loadScript("//www.googletagservices.com/tag/js/gpt.js");self.isLoaded=true;if(gads.style.display==="none"){self.dfpBlocked()}return this};gsndfpfactory.prototype.dfpBlocked=function(){var commands,self;self=this;self.adBlockerOn=true;commands=$win.googletag.cmd;setTimeout(function(){var _defineSlot,i,k,len,v;_defineSlot=function(name,dimensions,id,oop){$win.googletag.ads.push(id);$win.googletag.ads[id]={renderEnded:function(){},addService:function(){return this}};return $win.googletag.ads[id]};$win.googletag={cmd:{push:function(callback){callback.call(self);return this}},ads:[],pubads:function(){return this},noFetch:function(){return this},disableInitialLoad:function(){return this},disablePublisherConsole:function(){return this},enableSingleRequest:function(){return this},setTargeting:function(){return this},collapseEmptyDivs:function(){return this},enableServices:function(){return this},defineSlot:function(name,dimensions,id){return _defineSlot(name,dimensions,id,false)},defineOutOfPageSlot:function(name,id){return _defineSlot(name,[],id,true)},display:function(id){$win.googletag.ads[id].renderEnded.call(self);return this}};for(k=i=0,len=commands.length;i<len;k=++i){v=commands[k];$win.googletag.cmd.push(v);return}},50)};return gsndfpfactory}();return module.exports=gsndfpfactory})(window)}).call(this)},{trakless:3,gmodal:24,"./sw.css":25,"./circplus.html":26,"load-script":27}],24:[function(require,module,exports){var Emitter,domify,gmodal,modal,win;Emitter=require("emitter");domify=require("domify");win=window;modal=function(){function modal(){}modal.prototype.doc=win.document;modal.prototype.elWrapper=null;modal.prototype.el=null;modal.prototype.options={};modal.prototype.baseCls="gmodal";modal.prototype.closeCls="gmodal-close";modal.prototype.tpl='<div class="gmodal-wrap gmodal-top">&nbsp;<div><div class="gmodal-wrap gmodal-left"></div><div class="gmodal-content" id="gmodalContent"></div><div class="gmodal-wrap gmodal-right"></div>';modal.prototype.css=".gmodal{display:none;overflow:hidden;outline:0;-webkit-overflow-scrolling:touch;position:fixed;top:0;left:0;bottom:0;right:0;width:100%;height:100%;z-index:9999990}.gmodal-show{display:table}.gmodal-content,.gmodal-wrap{display:table-cell}.gmodal-wrap{width:50%}";modal.prototype.show=function(options){var self;self=this;self.elWrapper=self.createModal();if(!self.el){self.el=self.doc.getElementById("gmodalContent")}if(options!=null){self.options=options;if(self.options.content!=null){while(self.el.firstChild){self.el.removeChild(self.el.firstChild)}self.el.appendChild(domify(self.options.content));self.options.content=null}}if(!self.options){return self}if(self.options.closeCls){self.closeCls=self.options.closeCls}self.elWrapper.style.display=self.elWrapper.style.visibility="";self.elWrapper.className=self.baseCls+" gmodal-show "+(self.options.cls||"");self.emit("show");return this};modal.prototype.hide=function(){var self;self=this;if(!self.elWrapper){return self}self.elWrapper.className=""+self.baseCls;self.emit("hide");return this};modal.prototype.injectStyle=function(id,data){var el,self;self=this;el=self.doc.getElementById(id);if(!el){el=self.doc.createElement("style");el.id=id;el.type="text/css";if(el.styleSheet){el.styleSheet.cssText=data}else{el.appendChild(self.doc.createTextNode(data))}(self.doc.head||self.doc.getElementsByTagName("head")[0]).appendChild(el)}return this};modal.prototype.hasCls=function(el,cls){var i,k,len,ref,v;ref=cls.split(" ");for(k=i=0,len=ref.length;i<len;k=++i){v=ref[k];if((" "+el.className).indexOf(" "+v)>=0){return true}}return false};modal.prototype.checkEvent=function(name,evt,el){var scls,self,tg;self=this;evt=evt||win.event;tg=evt.target||evt.srcElement;if(tg.nodeType===3){tg=tg.parentNode}if(self.hasCls(tg.parentNode,""+self.closeCls)){tg=tg.parentNode}scls="gmodal-wrap "+self.closeCls;if(name==="click"){if(self.hasCls(tg,scls)||tg===el){self.emit("click",evt)}}else if(name==="keypress"){if(self.hasCls(tg,scls)||tg===el||tg===sel.doc||tg===self.doc.body){if((evt.which||evt.keyCode)===27){self.emit("esc",evt)}}}else if(name==="tap"){if(self.hasCls(tg,scls)||tg===el){self.emit("tap",evt)}}return false};modal.prototype.createModal=function(){var el,myKeypress,oldkp,self;self=this;el=self.doc.getElementById("gmodal");if(!el){self.injectStyle("gmodal-css",self.css);el=self.doc.createElement("div");el.id="gmodal";el.onclick=function(evt){return self.checkEvent("click",evt,el)};myKeypress=function(evt){return self.checkEvent("keypress",evt,el)};el.onkeypress=myKeypress;if(typeof self.doc.onkeypress==="function"){oldkp=self.doc.onkeypress;self.doc.onkeypress=function(evt){oldkp(evt);return myKeypress(evt)}}else{self.doc.onkeypress=myKeypress}el.ontap=function(evt){return self.checkEvent("tap",evt,el)};el.appendChild(domify(self.tpl));self.doc.getElementsByTagName("body")[0].appendChild(el)}return el};return modal}();Emitter(modal.prototype);gmodal=new modal;win.gmodal=gmodal;module.exports=gmodal},{emitter:28,domify:16}],28:[function(require,module,exports){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],25:[function(require,module,exports){module.exports='.gsnsw {\n  	float: left;\n}\n.gmodal {\n\n	/* IE 8- */\n	filter:alpha(opacity=90); \n	-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";\n    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);\n\n	/* works for old school versions of the Mozilla browsers like Netscape Navigator. */\n	-moz-opacity: 0.9; \n\n	/* This is for old versions of Safari (1.x) with KHTML rendering engine */\n	-khtml-opacity: 0.9; \n\n	/* This is the "most important" one because it\'s the current standard in CSS. This will work in most versions of Firefox, Safari, and Opera. */  \n	opacity: 0.9; \n  	background: #000; /* IE5+ */\n  	background: rgba(0,0,0,0.90);\n}\n.sw-pop {\n	filter: alpha(opacity=100);\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";\n    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);\n	-moz-opacity: 1; \n	-khtml-opacity: 1; \n	opacity: 1; \n	background: #777;\n	background: rgba(119, 119, 119, 1);\n}\n.gmodal-left, .gmodal-right {\n	width: 50%;\n}'},{}],26:[function(require,module,exports){module.exports='<div class="gsn-slot-container"><div class="cpslot cpslot2" data-companion="true" data-dimensions="300x50"></div></div><div class="gsn-slot-container"><div class="cpslot cpslot1" data-dimensions="300x100,300x120"></div></div>'},{}],27:[function(require,module,exports){var onload=require("script-onload");var tick=require("next-tick");var type=require("type");module.exports=function loadScript(options,fn){if(!options)throw new Error("Cant load nothing...");if("string"==type(options))options={src:options};var https=document.location.protocol==="https:"||document.location.protocol==="chrome-extension:";if(options.src&&options.src.indexOf("//")===0){options.src=https?"https:"+options.src:"http:"+options.src}if(https&&options.https)options.src=options.https;else if(!https&&options.http)options.src=options.http;var script=document.createElement("script");script.type="text/javascript";script.async=true;script.src=options.src;if("function"==type(fn)){onload(script,fn)}tick(function(){var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(script,firstScript)});return script}},{"script-onload":18,"next-tick":19,type:20}]},{},{1:""});